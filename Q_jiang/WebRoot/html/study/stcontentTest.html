<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>DDT</title>
		<link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
		<link rel="stylesheet" href="../../css/reset.css" />
		<link rel="stylesheet" href="../../css/study/stcontent.css" />
		<!--<link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
		<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
		<script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>-->
	</head>

	<body>
		<div class="page">
			<div class="header">
				<!--<img src="../img/11.png" />-->
				<div class="header-bar">
					<a href="javascript:void(0)">-- 可爱的小白兔</a>
				</div>
			</div>
			<div class="article">
				<div class="title">
					<p>页面滚动到底部自动加载下一页</p>
					<span>2016-08-02</span>
				</div>
				<div class="content">
					<p>在做分页加载功能的时候，通常会想到当页面滚动到底部的时候，自动加载下一页，这是一个非常适用的功能。(如果想了解代码的风格，请<a class="code-style" href="javascript:void(0)">前往这里</a>)</p>
					<p class="explain">——代码处应用了jQuery库</p>
					<p>html的内容很简单，demo.html如下：</p>
					<div class="pre">
						<span class=odd>&lt!DOCTYPE&nbsp;&nbsp;html&gt&nbsp;</span><span class=even>&lthtml&gt&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&lthead&gt&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&ltmeta&nbsp;&nbsp;charset=<span class=string>&quot;UTF-8&quot;</span>&gt&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&ltmeta&nbsp;&nbsp;name=<span class=string>&quot;viewport&quot;</span>&nbsp;&nbsp;content=<span class=string>&quot;initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no&quot;</span>&nbsp;&nbsp;/&gt&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lttitle&gt滚动加载下一页案例&lt/title&gt&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&ltstyle&nbsp;&nbsp;type=<span class=string>&quot;text/css&quot;</span>&gt&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;{&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;margin:&nbsp;&nbsp;0;&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding:&nbsp;&nbsp;0;&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html,&nbsp;&nbsp;body&nbsp;&nbsp;{&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;&nbsp;100%;&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;&nbsp;100%;&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.column&nbsp;&nbsp;{&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;&nbsp;100%;&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;&nbsp;250px;&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height:&nbsp;&nbsp;250px;&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-size:&nbsp;&nbsp;20px;&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:&nbsp;&nbsp;#fff;&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-align:&nbsp;&nbsp;center;&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.column:nth-child(2n)&nbsp;&nbsp;{&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background:&nbsp;&nbsp;#1FA2A9;&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.column:nth-child(2n&nbsp;&nbsp;-&nbsp;&nbsp;1)&nbsp;&nbsp;{&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background:&nbsp;&nbsp;#357AE8;&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt/style&gt&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&lt/head&gt&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&ltbody&gt&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&ltdiv&nbsp;&nbsp;class=<span class=string>&quot;page&quot;</span>&gt&lt/div&gt&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&lt/body&gt&nbsp;</span><span class=even>&lt/html&gt&nbsp;</span>
					</div>
					<p>js代码的思路：</p>
					<p>1、比较当前window滚动的位置和page的高度，如果window滚动的位置等于page - window的高度，则说明页面滑动到了页面的底部，加载下一页</p>
					<p>2、有时加载出来的第一页的高度小于window的高度，则可以自动加载下一页，直到页面能滚动为止</p>
					<p>3、当接口数据全部查询出来时，则移除页面滚动事件</p>
					<div class="pre">
						<span class=odd><span class=string>&quot;use&nbsp;&nbsp;strict&quot;</span>;&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=odd><span class=comments>//&nbsp;&nbsp;定义初始变量</span>&nbsp;</span><span class=even><span class=keywords>var</span>&nbsp;&nbsp;$window&nbsp;&nbsp;=&nbsp;&nbsp;$(window),&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;$page&nbsp;&nbsp;=&nbsp;&nbsp;$(<span class=string>&quot;.page&quot;</span>),&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;windowHeight&nbsp;&nbsp;=&nbsp;&nbsp;$window.height(),&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;pageHeight&nbsp;&nbsp;=&nbsp;&nbsp;windowHeight,&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;<span class=comments>//&nbsp;&nbsp;当前页,&nbsp;&nbsp;默认为第一页</span>&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;currentPage&nbsp;&nbsp;=&nbsp;&nbsp;1;&nbsp;</span><span class=even>&nbsp;</span><span class=odd><span class=comments>//&nbsp;&nbsp;显示模拟接口数据</span>&nbsp;</span><span class=even>showDemo();&nbsp;</span><span class=odd>&nbsp;</span><span class=even><span class=comments>//&nbsp;&nbsp;捕获窗口滚动事件</span>&nbsp;</span><span class=odd>$window.on(<span class=string>&quot;scroll&quot;</span>,&nbsp;&nbsp;<span class=keywords>function</span>(e){&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keywords>console</span>.<span class=keywords>log</span>($(<span class=keywords>this</span>).scrollTop());&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keywords>if</span>&nbsp;&nbsp;(pageHeight&nbsp;&nbsp;-&nbsp;&nbsp;windowHeight&nbsp;&nbsp;===&nbsp;&nbsp;$(<span class=keywords>this</span>).scrollTop()){&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentPage++;&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showDemo();&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;e.stopPropagation();&nbsp;</span><span class=even>});&nbsp;</span><span class=odd>&nbsp;</span><span class=even><span class=comments>/<span class=comments>**</span></span>&nbsp;</span><span class=odd>&nbsp;&nbsp;<span class=comments>*&nbsp;&nbsp;显示数据</span>&nbsp;</span><span class=even>&nbsp;&nbsp;<span class=comments>*&nbsp;&nbsp;</span>&nbsp;</span><span class=odd>&nbsp;&nbsp;<span class=comments>*/</span>&nbsp;</span><span class=even><span class=keywords>function</span>&nbsp;&nbsp;showDemo(){&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keywords>var</span>&nbsp;&nbsp;current&nbsp;&nbsp;=&nbsp;&nbsp;currentPage,&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=comments>//&nbsp;&nbsp;获取模拟接口数据</span>&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listStr&nbsp;&nbsp;=&nbsp;&nbsp;getDemoList(current);&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current&nbsp;&nbsp;&gt&nbsp;&nbsp;1&nbsp;&nbsp;?&nbsp;&nbsp;$page.append(listStr)&nbsp;&nbsp;:&nbsp;&nbsp;$page.html(listStr);&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=comments>//&nbsp;&nbsp;最新page&nbsp;&nbsp;的高度</span>&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pageHeight&nbsp;&nbsp;=&nbsp;&nbsp;$page.height();&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=comments>//&nbsp;&nbsp;自动加载下一页</span>&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=keywords>if</span>&nbsp;&nbsp;(pageHeight&nbsp;&nbsp;&lt=&nbsp;&nbsp;windowHeight){&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentPage++;&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showDemo();&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span class=even>}&nbsp;</span><span class=odd>&nbsp;</span><span class=even><span class=comments>/<span class=comments>**</span></span>&nbsp;</span><span class=odd>&nbsp;&nbsp;<span class=comments>*&nbsp;&nbsp;模拟接口数据</span>&nbsp;</span><span class=even>&nbsp;&nbsp;<span class=comments>*/</span>&nbsp;</span><span class=odd><span class=keywords>function</span>&nbsp;&nbsp;getDemoList(){&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keywords>var</span>&nbsp;&nbsp;str&nbsp;&nbsp;=&nbsp;&nbsp;<span class=string>&quot;&quot;</span>,&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arr&nbsp;&nbsp;=&nbsp;&nbsp;[<span class=string>&quot;1&quot;</span>,&nbsp;&nbsp;<span class=string>&quot;2&quot;</span>,&nbsp;&nbsp;<span class=string>&quot;3&quot;</span>,&nbsp;&nbsp;<span class=string>&quot;4&quot;</span>,&nbsp;&nbsp;<span class=string>&quot;5&quot;</span>];&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;<span class=comments>//&nbsp;&nbsp;当加载到第4页时，模拟全部数据加载完成</span>&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keywords>if</span>&nbsp;&nbsp;(currentPage&nbsp;&nbsp;===&nbsp;&nbsp;4){&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arr&nbsp;&nbsp;=&nbsp;&nbsp;[<span class=string>&quot;1&quot;</span>,&nbsp;&nbsp;<span class=string>&quot;2&quot;</span>];&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keywords>var</span>&nbsp;&nbsp;arrLength&nbsp;&nbsp;=&nbsp;&nbsp;arr.length;&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;<span class=comments>//&nbsp;&nbsp;返回数据为空或者小于设定的每页查询的条数</span>&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keywords>if</span>&nbsp;&nbsp;(arrLength&nbsp;&nbsp;&lt&nbsp;&nbsp;5){&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=comments>//&nbsp;&nbsp;移除相关事件</span>&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;offBind();&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;for(<span class=keywords>var</span>&nbsp;&nbsp;i&nbsp;&nbsp;=&nbsp;&nbsp;0;&nbsp;&nbsp;i&nbsp;&nbsp;&lt&nbsp;&nbsp;arrLength;&nbsp;&nbsp;i++){&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str&nbsp;&nbsp;+=&nbsp;&nbsp;<span class=string>&quot;&ltdiv&nbsp;&nbsp;class=\&quot;</span>column\<span class=string>&quot;&gt我是第&nbsp;&nbsp;&quot;</span>&nbsp;&nbsp;+&nbsp;&nbsp;currentPage&nbsp;&nbsp;+&nbsp;&nbsp;<span class=string>&quot;&nbsp;&nbsp;页，第&quot;</span>&nbsp;&nbsp;+&nbsp;&nbsp;arr[i]&nbsp;&nbsp;+&nbsp;&nbsp;<span class=string>&quot;条数据&lt/div&gt&quot;</span>;&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span class=odd>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keywords>return</span>&nbsp;&nbsp;str;&nbsp;</span><span class=even>}&nbsp;</span><span class=odd>&nbsp;</span><span class=even><span class=comments>/<span class=comments>**</span></span>&nbsp;</span><span class=odd>&nbsp;&nbsp;<span class=comments>*&nbsp;&nbsp;数据加载完成，移除相关事件</span>&nbsp;</span><span class=even>&nbsp;&nbsp;<span class=comments>*/</span>&nbsp;</span><span class=odd><span class=keywords>function</span>&nbsp;&nbsp;offBind(){&nbsp;</span><span class=even>&nbsp;&nbsp;&nbsp;&nbsp;$window.off(<span class=string>&quot;scroll&quot;</span>);&nbsp;</span><span class=odd>}&nbsp;</span>
					</div>
				</div>
			</div>
			<div class="evaluate">

			</div>
		</div>
	</body>

</html>